
// The structure of the modal window is:
// #modal-window
//   #modal-row
//     .modal-column (one or more)

$modal-pad: 24px;
$animation-duration: 0.25s;
$modal-breakpoint: 720px;


////////////////////////////////////////////////////////////////////////////////
// Overlay
////////////////////////////////////////////////////////////////////////////////

body.with-modal {
	#content, #header, #footer {
		filter: blur(12px);
	}
}

#modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: rgba(#000, 0.5);
	z-index: 99;
}


////////////////////////////////////////////////////////////////////////////////
// Window
////////////////////////////////////////////////////////////////////////////////

#modal-window {
	position: fixed;
	top: $modal-pad;
	width: 85%;
	left: 50%;
	z-index: 100;
	transform: translate(-50%, -120%);
	transition: $animation-duration ease transform;
	box-shadow: 0 2px $modal-pad rgba(#000, 0.25);
	// as of Chrome 96, overflow: hidden seems to be broken in some circumstances and doesn't respect
	// the relative positioning, so we're forced to make it visible with a clip path
	overflow-x: visible;
	clip-path: inset(0); // clip everything outside of the view
	background-color: #fff;
	&.show {
		transform: translate(-50%,0);
	}
	&.tiny {
		max-width: 500px;
	}
}

@media only screen and (max-width: $modal-breakpoint) {
	#modal-window {
		width: 94%;
	}
}


////////////////////////////////////////////////////////////////////////////////
// Row
////////////////////////////////////////////////////////////////////////////////

#modal-row {
	position: relative;
	width: 100%;
	display: flex;
	transition: left $animation-duration ease;
}


////////////////////////////////////////////////////////////////////////////////
// Container
////////////////////////////////////////////////////////////////////////////////

.modal-column {
	display: flex;
	flex-direction: column;
	width: 100%;
	.modal-header {
		flex: 0 0 auto;
		display: flex;
		padding-right: 50px;
		h2 {
			flex: 1 0 auto;
			margin: 0;
			padding: $modal-pad/3 $modal-pad/2;
			line-height: 1;
		}
		a.close-modal {
			position: absolute;
			right: 0;
			top: 0;
			font-size: 32px;
			display: block;
			width: 32px;
			text-align: center;
			&:hover {
				transform: scale(1.08);
			}
			&:active {
				transform: scale(0.92);
			}
		}
	}
	.modal-content {
		min-height: 400px;
		flex: 1 1 auto;
		overflow-y: scroll;
	}
	.modal-actions {
		flex: 0 0 auto;
		padding: $modal-pad/2;
		text-align: right;
		position: relative;
		a {
			display: inline-block;
			margin-left: 1em;
			&[disabled] {
				opacity: 0.5;
			}
		}
		.end {
			position: absolute;
			left: 0;
			top: 0;
			bottom: 0;
			padding: $modal-pad/2;
			a {
				margin-left: 0;
				margin-right: 1em;
			}
		}
	}
}


////////////////////////////////////////////////////////////////////////////////
// Alert
////////////////////////////////////////////////////////////////////////////////

#modal-alert {
	position: fixed;
	top: 50%;
	width: 300px;
	left: 50%;
	z-index: 1000;
	transform: translate(-50%, -50%) scale(0);
	transition: $animation-duration ease transform;
	box-shadow: 0 2px $modal-pad rgba(#000, 0.25);
	overflow-x: hidden;
	background-color: #fff;
	&.show {
		transform: translate(-50%, -50%) scale(1);
	}
	> .title {
		i {
			margin-right: 0.5em;
		}
		padding: 1em 1em 0.5em 1em;
		text-align: center;
		font-weight: bold;
	}
	.body {
		padding: 0.5em 1em;
	}
	.actions {
		padding: 1em;
		a.action {
			display: block;
			padding: 1em;
			line-height: 1;
			font-weight: bold;
			text-align: center;
			margin-bottom: 1em;
			&:last-child {
				margin-bottom: 0;
			}
		}
	}
}